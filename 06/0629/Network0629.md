# Network - 0629  

## Layer와 Layered 구조  
레이어드 구조는 존립이 일렬로 의존적인 형태의 관계를 표현하는 구조이다.  
후방 조건은 전방 조건을 전제로 존립한다.  
OSI 7 Layer가 대표적인 레이어드 구조로 뒷 조건은 앞 조건을 전제로 존립한다.  
  
## OSI 7 Layer
OSI 7 Layer는 개념이다.  
1. 물리L1/데이터L2(이더넷 프로토콜) -> MAC(NIC에 부여된 물리주소)<br>
2. 네트워크L3(인터넷 프로토콜)/전송계층L4(TCP/UDP프로토콜) -> IP(호스트에 부여된 주소), Port번호<br>
3. 표현계층L5(SSL)/응용계층L6(HTTP) -> 애플리케이션 단계<br>
실제 개발에서 사용하는 것은 OSI 7 Layer의 구현체라는 점을 생각하며 공부하자.  
  
## Host = Computer + Network
Switch = 목적 자체가 네트워크 그 자체인 호스트(Router, IPS, Tab, Aggregation)  
End-point = 네트워크라는 인프라를 이용하는 이용주체로서의 호스트(Client, Server, Peer)  
  
## Switch 
네트워크는 복잡한 망이다. 망에는 교차로가 있다. 라우터가 망의 교차로이다.  
교차로에는 이정표가 필요하다. 이정표가 라우팅 테이블(L3 Switch)이다. 라우터의 라우팅 테이블에는 방향을 안내하는 정보가 있다.  
패킷은 네트워크 망을 돌아다닌다. 패킷이 목적지에 도달하기 위해 드는 비용은 Matric 값이라고 한다.  
  
## NIC + (L2) Frame + LAN card + MAC
NIC(Network Interface Card)  
+ Frame(L2에서 유통되는 데이터 단위(1514 Byte))  
+ LAN(Local Area Network)  
+ MAC  
== 흔히 말하는 랜카드(네트워크 통신 장치)  
  
## LAN과 WAN의 경계, Broadcast(L2)
단일 목적지를 가진 유니캐스트와 달리 브로드캐스트는 모든 호스트를 목적지로 한다.  
브로드캐스트(<-> 유니캐스트)는 효율과는 거리가 멀다.  
브로드캐스트 주소는 비트 단위가 모두 1인 형태로 되어있는 특별한 주소이다.  
따라서 목적지의 주소가 FF(1111 1111)-FF-FF-FF-FF-FF의 형태이면 브로드캐스팅이다.  

학습의 편의를 위해 물리, 데이터 계층 까지를 LAN으로 보고 전송/네트웨크 계층을 WAN으로 볼 수 있다.  
물리-데이터 계층은 케이블을 통해 전달되는 전기 신호로 물리적 실체이고  
전송-네트워크 계층은 해당 전자기 신호를 해석해 논리적으로 매핑한 논리적 실체이다.  
라고 이해하면 편하다.  

## IPv4주소의 구조(L3)
L2계층의 이더넷은 MAC주소를 가지고 이는 48bit로 이루어져 있다.  
L3계층의 IPv4는 32bit로 4byte로 이루어져 있다.  
처음 3byte는 네트워크ID이고 마지막 1byte가 호스트ID이다.  
192.168.0.10  
-> \[192.168.0\]-\>네트워크ID, \[.10\] -\> 호스트ID<br>
여기서 네트워크ID는 호스트ID가 있는 네트워크의 범위를 좁히게 하고 호스트ID는 네트워크ID를 통해  
찾아낸 범위 내의 특정 목적지 ID이다.

## Packet(L3)
L3 IP Packet으로 외우자.  
Header와 Payload로 나뉘며 최대 크기는 MTU(Maximum Transmission Unit -> 1500bytes(1.4KB))  
헤더에 Src와 Dst가 담기고 페이로드는 내용물이다.  
  
## 네트워크 단위의 캡슐화
프레임(패킷(세그먼트(...)))과 같이 한 레이어의 작업 단위는 이전 레이어의 작업단위를 캡슐화한다.  
  
## 패킷의 생성, 전달, 소멸  
프로세스는 소켓(TCP/IP프로토콜을 추상화해 유저 모드 상의 애플리케이션 프로세스가 커널모드와 소통할 수 있게 만들어놓은 파일)을 통해 TCP/IP프로토콜 - 드라이버 - NIC 를 거쳐 데이터를 송수신한다.   
소켓의 데이터 단위 -> 스트림(단위. 스트림은 원래 단위가 없다. 애플리케이션 프로세스에 의해 임의로 분할된다.)<br>
TCP의 데이터 단위 -> 세그먼트(단위. MSU - Maximum Segmentation Size)<br>
IP의 데이터 단위 -> 패킷(단위. MTU - Maximum Transmission Size)<br>
드라이버, 이더넷의 데이터 단위 -> 프레임(단위. 프레임 자체)<br>


  









