# spring 0703

## MVC
Model  
Model은 애플리케이션의 비즈니스 로직과 그와 관련된 데이터를 다룬다. 일반적으로 도메인, 서비스, 리포지토리 패키지로 구성된다.
도메인 패키지는 핵심 비즈니스 로직과 앱의 전반적인 데이터 구조를 드러내는 객체, 엔티티 등을 포함한다. 
이 객체들은 ORM(Object Relational Mapping) 프레임워크인 JPA나 하이버네이트를 통해 영속화되기도 한다.<br>
  
View  
View는 유저 인터페이스를 렌더링한다. 스프링에서는 JSP(Java Server Page), 타임리프 등의 템플릿 엔진 기술을 활용한다. 
템플릿 패키지는 리소스의 templates 폴더로 지정되며 해당 폴더 안에 html을 생성해 Controller로 호출할 수 있다.<br>
  
Controller  
Controller는 클라이언트의 요청에 따라 모델의 데이터를 컨트롤하고 이를 알맞은 뷰에 맞춰 응답한다. 
웹 백엔드에서는 URL을 통해 HTTP 프로토콜에 맞는 매핑을 하고 변경사항을 모델 객체에 추가해 뷰를 응답하는 식으로 활용한다.<br>
  
스프링은 MVC를 통해 요청매핑(프로토콜 매핑), 데이터 바인딩(HTML, DB, Objects를 호환), 뷰 템플릿 제공, 유효성 검사, 국제화 등을 편리하게 이용할 수 있도록 한다.
## Model 구성
모델의 패키지 구성은 일반적으로 도메인, 서비스, 리포지토리로 나뉜다.  
  
도메인은 상기했듯이 핵심 비즈니스 로직과 데이터를 정의한다. 또한 ORM을 통해 해당 데이터를 영속성 컨텍스트 안에서 다루기도 한다.<br>
  
서비스는 컨트롤러와 리포지토리를 매개한다. 리포지토리의 데이터를 선별해 비즈니스 룰에 따라 이를 조정하는 작업을 캡슐화한다. 
컨트롤러 계층은 서비스를 통해 리포지토리의 데이터와 로직을 사용하지만 구체적인 내용을 알지 못하게 된다.<br>
  
리포지토리는 직접적으로 DB에 쿼리를 송신해 데이터의 접근과 영속성을 관리하는 패키지이다. 리포지토리가 쿼리를 캡슐화함으로 서비스는 DB에 접근하기 위한 구체적인 쿼리를 몰라도 DB의 데이터를 CRUD할 수 있게 된다. 
원래는 직접 문자열로 된 코드를 작성해야 했지만 기술의 발전으로 현재는 스프링 JPA나 QueryDSL을 활용한 데이터 관리방식이 주를 이룬다.<br>
  






